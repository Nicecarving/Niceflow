<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Encuentros Privados</title>
    <style>
        :root { --pink: #e84393; --green: #2ecc71; --bg: #1a1a1a; --card: #222; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: white; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        #app { width: 100%; max-width: 450px; background: var(--card); min-height: 100vh; display: flex; flex-direction: column; justify-content: center; padding: 28px 20px; }

        .step { display: none; text-align: center; }
        .active { display: block; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

        /* –§–û–¢–û –î–ï–í–£–®–ö–ò */
        .avatar-wrap { position: relative; display: inline-block; margin-bottom: 16px; }
        .avatar-img { width: 110px; height: 110px; border-radius: 50%; object-fit: cover; border: 3px solid var(--pink); display: block; }
        .online-badge { position: absolute; bottom: 4px; right: 4px; background: var(--green); color: #000; font-size: 10px; font-weight: bold; padding: 2px 7px; border-radius: 20px; border: 2px solid var(--card); white-space: nowrap; }

        /* –ò–ú–ò–¢–ê–¶–ò–Ø –°–û–û–ë–©–ï–ù–ò–Ø */
        .message-preview { background: #2a2a2a; border-left: 3px solid var(--pink); border-radius: 8px; padding: 10px 14px; margin: 12px 0 20px; text-align: left; font-size: 14px; color: #ccc; }
        .message-preview strong { color: white; display: block; margin-bottom: 4px; font-size: 15px; }

        h1 { font-size: 21px; margin-bottom: 8px; line-height: 1.3; }
        p { font-size: 15px; color: #bbb; margin: 6px 0; }

        /* –°–û–¶–ò–ê–õ–¨–ù–û–ï –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–û */
        .social-proof { background: #2a2a2a; border-radius: 10px; padding: 10px 14px; margin: 14px 0; display: flex; align-items: center; gap: 10px; text-align: left; }
        .social-proof .avatars { display: flex; }
        .social-proof .avatars span { font-size: 22px; margin-right: -6px; }
        .social-proof p { font-size: 13px; color: #aaa; margin: 0; }
        .social-proof strong { color: white; }

        /* –ö–ù–û–ü–ö–ò */
        .btn { display: block; width: 100%; background: var(--pink); color: white; border: none; padding: 17px; margin: 10px 0; border-radius: 50px; font-weight: bold; font-size: 17px; cursor: pointer; text-decoration: none; box-shadow: 0 4px 20px rgba(232,67,147,0.3); transition: transform 0.1s; }
        .btn:active { transform: scale(0.97); }
        .btn-alt { background: #3a3a3a; box-shadow: none; font-size: 15px; padding: 14px; }
        .btn-secondary { background: #333; box-shadow: none; }

        /* –ü–†–û–ì–†–ï–°–° */
        #progress-bar { width: 100%; background: #333; height: 8px; border-radius: 5px; margin-top: 20px; overflow: hidden; }
        #fill { width: 0%; height: 100%; background: var(--pink); transition: width 0.5s; }

        /* –¢–ê–ô–ú–ï–† */
        .timer-box { background: #2a2a2a; border-radius: 12px; padding: 12px 16px; margin: 16px 0; }
        .timer-box p { font-size: 13px; color: #888; margin-bottom: 4px; }
        #timer { color: var(--pink); font-weight: bold; font-size: 22px; }

        /* –ü–†–û–§–ò–õ–ò –í –®–ê–ì 4 */
        .profiles-row { display: flex; justify-content: center; gap: 8px; margin: 14px 0; }
        .profile-thumb { width: 56px; height: 56px; border-radius: 50%; background: #333; border: 2px solid var(--pink); display: flex; align-items: center; justify-content: center; font-size: 26px; }

        .badge { display: inline-block; background: var(--green); color: #000; font-size: 12px; font-weight: bold; padding: 4px 12px; border-radius: 20px; margin-bottom: 14px; }

        .step3-icon { font-size: 60px; margin-bottom: 16px; }
    </style>
</head>
<body>
<div id="app">

    <!-- –®–ê–ì 1: –§–æ—Ç–æ + –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è -->
    <div id="step1" class="step active">
        <div class="avatar-wrap">
            <!-- –ó–ê–ú–ï–ù–ò src –ù–ê –°–í–û–Æ –§–û–¢–û–ì–†–ê–§–ò–Æ –î–ï–í–£–®–ö–ò -->
            <img class="avatar-img" src="https://i.imgur.com/rwrGcVF.jpg" alt="" onerror="this.style.fontSize='60px';this.style.background='#333';this.outerHTML='<div style=\'width:110px;height:110px;border-radius:50%;background:#333;border:3px solid #e84393;display:flex;align-items:center;justify-content:center;font-size:50px;margin:auto\'>üë©</div>'">
            <div class="online-badge">‚óè en l√≠nea</div>
        </div>

        <div class="message-preview">
            <strong>üí¨ Sof√≠a, 34 ‚Äî <span class="city">tu ciudad</span></strong>
            "Hola... te vi en la app. ¬øTienes tiempo para chatear? üòä"
        </div>

        <h1>¬øTIENES 18 A√ëOS?</h1>
        <p>Esta plataforma en <b><span class="city">tu ciudad</span></b> es solo para adultos.</p>

        <div class="social-proof">
            <div class="avatars"><span>üë©</span><span>üë©</span><span>üë©</span></div>
            <p><strong id="user-count">8,420</strong> usuarios registrados en <span class="city">tu pa√≠s</span></p>
        </div>

        <button class="btn" onclick="nextStep(2)">‚úÖ S√ç, TENGO 18+</button>
        <button class="btn btn-alt" onclick="nextStep(2)">No tengo 18</button>
    </div>

    <!-- –®–ê–ì 2: –¶–µ–ª—å -->
    <div id="step2" class="step">
        <div class="avatar-wrap">
            <img class="avatar-img" src="https://i.imgur.com/rwrGcVF.jpg" alt="" onerror="this.outerHTML='<div style=\'width:110px;height:110px;border-radius:50%;background:#333;border:3px solid #e84393;display:flex;align-items:center;justify-content:center;font-size:50px;margin:auto\'>üë©</div>'">
            <div class="online-badge">‚óè en l√≠nea</div>
        </div>
        <h1>¬øQU√â BUSCAS?</h1>
        <p>Sof√≠a y otras mujeres en <b><span class="city">tu ciudad</span></b> esperan tu respuesta.</p>
        <button class="btn" style="margin-top:20px" onclick="nextStep(3)">üî• Encuentro esta noche</button>
        <button class="btn btn-secondary" onclick="nextStep(3)">üí¨ Conocer y chatear</button>
        <button class="btn btn-secondary" onclick="nextStep(3)">‚ù§Ô∏è Relaci√≥n seria</button>
    </div>

    <!-- –®–ê–ì 3: –ó–∞–≥—Ä—É–∑–∫–∞ -->
    <div id="step3" class="step">
        <div class="step3-icon">üîç</div>
        <h1>BUSCANDO PERFILES...</h1>
        <p id="status-text">Verificando fotos disponibles...</p>
        <div id="progress-bar"><div id="fill"></div></div>
    </div>

    <!-- –®–ê–ì 4: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div id="step4" class="step">
        <div class="badge">‚úÖ PERFIL ENCONTRADO</div>
        <h1 style="color: var(--green);">¬°TIENES MENSAJES!</h1>
        <div class="profiles-row">
            <div class="profile-thumb">üë©</div>
            <div class="profile-thumb">üë©</div>
            <div class="profile-thumb">üë©</div>
            <div class="profile-thumb">üë©</div>
        </div>
        <p><b>7 mujeres</b> cerca de <span class="city">ti</span> quieren conocerte ahora.</p>
        <div class="timer-box">
            <p>‚è≥ Acceso gratuito disponible por:</p>
            <div id="timer">02:00</div>
        </div>
        <a href="#" class="btn" id="final-link" onclick="goToOffer(); return false;">VER FOTOS Y MENSAJES ‚Üí</a>
        <p style="font-size:12px; color:#666; margin-top:12px;">Registro gratuito ¬∑ Sin tarjeta de cr√©dito</p>
    </div>

</div>

<script>
    // =============================================
    // –ù–ê–°–¢–†–û–ô–ö–ò ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ó–ê–ú–ï–ù–ò
    // =============================================
    const mainOfferBase = "https://fwziv.bemobtrk.com/click";
    const backOfferBase = "https://go.cm-trk6.com/aff_c?offer_id=10000&aff_id=70978&aff_sub5=push";

    // –ß–∏—Ç–∞–µ–º click_id –∏–∑ URL ‚Äî BeMob –ø–µ—Ä–µ–¥–∞—ë—Ç –µ–≥–æ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä visitor_id
    const urlParams = new URLSearchParams(window.location.search);
    const clickId = urlParams.get('visitor_id') || urlParams.get('click_id') || '';

    const mainOffer = mainOfferBase + (clickId ? '&click_id=' + clickId : '');
    const backOffer = backOfferBase + (clickId ? '&click_id=' + clickId : '');

    // =============================================
    // –¢–†–ï–ö–ò–ù–ì –í–†–ï–ú–ï–ù–ò –ù–ê –ü–†–ï–õ–ï–ù–î–ï
    // –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ BeMob —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä lp_time (—Å–µ–∫—É–Ω–¥—ã)
    // –í BeMob: –¢–æ–∫–µ–Ω ‚Üí s1 –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä lp_time
    // =============================================
    const startTime = Date.now();

    function getTimeOnPage() {
        return Math.round((Date.now() - startTime) / 1000);
    }

    function goToOffer() {
        const t = getTimeOnPage();
        const sep = mainOffer.includes('?') ? '&' : '?';
        window.location.href = mainOffer + sep + 's1=' + t;
    }

    // =============================================
    // –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ì–û–†–û–î–ê –ò –°–¢–†–ê–ù–´ –ü–û IP
    // =============================================
    const cityData = {
        EC: { cities: ["Quito", "Guayaquil", "Cuenca", "Ambato", "Machala"], count: "9,840" },
        GT: { cities: ["Ciudad de Guatemala", "Quetzaltenango", "Mixco", "Villa Nueva"], count: "11,230" },
        HN: { cities: ["Tegucigalpa", "San Pedro Sula", "La Ceiba", "Choloma"], count: "8,760" },
        DO: { cities: ["Santo Domingo", "Santiago", "La Romana", "San Pedro de Macor√≠s"], count: "12,100" },
        CR: { cities: ["San Jos√©", "Alajuela", "Cartago", "Heredia", "Liberia"], count: "7,430" },
        PA: { cities: ["Ciudad de Panam√°", "Col√≥n", "David", "La Chorrera"], count: "6,980" },
    };

    function setGeo(countryCode) {
        const geo = cityData[countryCode] || { cities: ["tu ciudad"], count: "8,420" };
        const city = geo.cities[Math.floor(Math.random() * geo.cities.length)];
        document.querySelectorAll('.city').forEach(el => el.innerText = city);
        const countEl = document.getElementById('user-count');
        if (countEl) countEl.innerText = geo.count;
    }

    fetch('https://ip-api.com/json/?fields=countryCode')
        .then(r => r.json())
        .then(data => setGeo(data.countryCode))
        .catch(() => setGeo('EC'));

    // =============================================
    // –ö–í–ò–ó
    // =============================================
    function nextStep(n) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('step' + n).classList.add('active');

        if (n === 3) {
            const fill = document.getElementById('fill');
            const status = document.getElementById('status-text');
            setTimeout(() => { fill.style.width = "30%"; status.innerText = "Localizando por GPS..."; }, 400);
            setTimeout(() => { fill.style.width = "65%"; status.innerText = "Sincronizando perfiles..."; }, 1100);
            setTimeout(() => { fill.style.width = "90%"; status.innerText = "Verificando fotos..."; }, 1800);
            setTimeout(() => { nextStep(4); }, 2500);
        }

        if (n === 4) startTimer();
    }

    function startTimer() {
        let duration = 120;
        const el = document.getElementById('timer');
        const iv = setInterval(() => {
            const m = Math.floor(duration / 60);
            const s = duration % 60;
            el.innerText = `0${m}:${s < 10 ? '0' + s : s}`;
            if (--duration < 0) { clearInterval(iv); }
        }, 1000);
    }

    // =============================================
    // BACK BUTTON
    // =============================================
    (function(w, l) {
        history.replaceState(null, document.title, l.pathname + "#!/stealth");
        history.pushState(null, document.title, l.pathname);
        w.addEventListener("popstate", function() {
            if (l.hash === "#!/stealth") {
                history.replaceState(null, document.title, l.pathname);
                setTimeout(() => l.replace(backOffer), 0);
            }
        }, false);
    }(window, location));
</script>
</body>
</html>
